
<!doctype html>
<html lang="en">
  <head>
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/leaflet-src.js"></script>
    <link rel="stylesheet" href="http://openlayers.org/en/v3.8.2/css/ol.css" type="text/css">
    <style>
      .map {
        height: 400px;
        width: 100%;
      }
    </style>
    <script src="http://openlayers.org/en/v3.8.2/build/ol.js" type="text/javascript"></script>
    <script src="divide-polygon.js" type="text/javascript"></script>
    <title>EDSC Polygon Plugin Example</title>
  </head>
  <body>
    <h2>OpenLayers Map</h2>
    <div id="map-ol" class="map"></div>
    <h2>Leaflet Map</h2>
    <div id="map" class="map"></div>
    <script type="text/javascript">
    (function() {
      (function(document, window, $, LatLng, dividePolygon) {
        $(document).ready(function(){
              var olMap = new ol.Map({
                target: 'map-ol',
                layers: [
                  new ol.layer.Tile({
                    source: new ol.source.MapQuest({layer: 'sat'})
                  })
                ],
                view: new ol.View({
                  center: ol.proj.transform([-60, 20], 'EPSG:4326', 'EPSG:3857'),
                  zoom: 2
                })
              });
              var lfMap = L.map('map').setView([20, -60], 2);
              L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
                attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
                maxZoom: 18,
                id: 'bosun58.nb2bg06k',
                accessToken: 'pk.eyJ1IjoiYm9zdW41OCIsImEiOiJlMzY1YmI1MjZlNThjNDZmNDQxMGQ5NjgwZjk2NjAwNyJ9.-lA-ACJM-ZdLDZkb16AAJQ'
              }).addTo(lfMap);
              var simplePoly = [new LatLng(-29.87, 0.009), new LatLng(40, 0.015), new LatLng(40, -13.05), new LatLng(29, -11.5), new LatLng(-29.87, 0.009)];
              var divided = dividePolygon(simplePoly);
              L.multiPolyline(divided.boundaries).addTo(lfMap);
              
              var anotherSimplePoly = [new LatLng(52, -150), new LatLng(52, -100), new LatLng(30, -100), new LatLng(30, -150), new LatLng(52, -150)];
              divided = dividePolygon(anotherSimplePoly);
              L.multiPolyline(divided.boundaries).addTo(lfMap);

              var crossAntiMPoly = [new LatLng(22, -150), new LatLng(22, 30), new LatLng(10, 30), new LatLng(10, -150), new LatLng(22, -150)];
              divided = dividePolygon(crossAntiMPoly);
              L.multiPolyline(divided.boundaries).addTo(lfMap);

        });
      })(document, window, jQuery, window.edsc.map.LatLng, window.edsc.map.sphericalPolygon.dividePolygon);
    }).call(this);
    </script>
  </body>
</html>
